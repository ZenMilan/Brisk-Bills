Here's the current Models plan:
	* 1. Get the invoices.reattach_activities to work via a collection and setting at invoice create time... 
		* We'll likely need to refactor the activity code now, to return an array of 'suggested' activity ids that will be associated with the invoice
		* (*then*)  we could nix this after-update functionality entirely, and do these associations the same way we're doing the invoice associations ...
			* That wayy, all we have to do is an inject through the invoice.activities! (much smarter! and let's us grow better in the future)

	* 2. Fix the amount_not_greater_than_payment_or_invoice_totals validate
		* See the commented out TODO, and read
		* Probably that commented block should go into a separate amount_not_greater_than_invoice_totals method

	* 3. Flesh out the invoice_payment::test_bogus_allocations 
	
	* 4. Now we can allow multiple invoices to be unpublished and published invoices to be deleted..
		* Write-new/revise-existing tests to accomdate this change
		
	* 5. We need to remove the clearing of payments on a is_published change.
  		* THis causes a new problem, InvoicePayments need to be adjusted/removed/added, when the balance is adjusted...
  			* THis could be complicated, b/c the activities themselves are what will change... this will need to be an after_change on the activities model
  		* is_published is only used to determine whther to show a client their bill
  		* Some tests will need adjustment here. Remove existing Model error-raises if/when appropriate...
  		* Add some new tests to make sure our activity after_change hook is working the way it should...
  			* In the case that an invoice price is adjusted after it was marked paid, it needs to change back to unpaid status:
  			* Raise and lower the prices of invoices - make sure the markings adjust appropriately
  			* Do we allow payment changes? I kind of think not ... they can create and delete these, for now...
  	
  	Now for the Controllers:
  	* Invoice_id should be settable on the labor/materials/proposals/etc controllers. (though not the activities controller..not yet at least)
  	
  	* Keep in mind - we may need/want to update InvoicePayments and not just delete/create them (say an amount changes from $4.00 -> $3.00 on the same invoice/payment
  	* let's start by adding a detail that shows what payments are currently allocated..
  	* We don't need to get sart about allocating, unless there's 0 allocated payments whcih are currently assigned...
  	* Show a warning if someone tries to commit a payment w/o allocating the full amount...
  	* Don't forget to Add the right show-action fields too (in the payments controller)
  	* There's should be a way in the invoices to show which payments were applied to the invoice... (perhaps on the edit detail - just a listing?)
  		* Maybe this should be editable.... perhaps only if is_published?
  	* THen we can add an edit...
  	* Remove that restriction on unpublishing old invoices...
  	* And then we need to add a complemntary field in the invoices view? Nah - but show which payments are currently assigned as a read-only...

* Start using 0.7-pre on mario...

* All of our read_attribute stuff, isn't "Caching"the newest values. (I think - write a test for this ...)
	* Use a find_invoice_with_totals
		* then update an invoice
		* then run an invoice.amunt(true)
		* tune run an invice.amount .... This this treturn the prior amount value?
	* THis has to be fixed/ested for all read attributes...

* We should put proper transactions in place here too while we're in here...
* I'd like to see a payment identifier listed in the payments list ... (check no/cc#)
* Add Existing Client Representatives should show them in alaphabetical order

* We should add an unpublished Open Invoices controller ...

* Payment:::is_allocated should probably be added to a view and then list controller...
	* Code is there - but no view supports it...

* We should put tax before cost in the activities with prices controller...

* Publish 0.7

* Probably - when prompted to delete an invoice, we should give the option to also remove the activities (or preserve them and leave them unsassigned)

* Move_to_invoice function should allow us to Move_to '(Unassigned)', and ideally that would be a radio group

* Translate the time into the local zone for the user, probably each user/client should have a zone associtation in their account.
	*  Its already stored in UTC everywhere...
	* We need to factor this into invoices too, I think

* Public interface
* Showing the Client eventlogs as an unedutable nested list  might be nice... Hell, employee eventlogs too....
* CC payments handling - not a plugin

* Publish 0.8

* Plugin interface...

* Revise the site-settings interfaces...

---------------
LONGER-TERM: (Needs re-prioritization...)

Feature:

* I'd like some tests cases written for the view objects, make sure they work just like the non-views... ...
	* Boy this is getting hard, I think it has something to do wioth the transactions... Oddly, the tests work on their own, outside of the rake test	

* Better searches by using the search sql fields...

* See what we decide to do long-term with our model_view hack, maybe we can run tests on both models, as well as their view_models. Just one by one... I think thats smart...

Feature: Make the Search actually work the way we'd expect. Perhaps even make something mroe useful still that would let us filter records...

BUG: We should probably write a plugin that better displays delete errors in the flash[:error] , invoices is a good place for that
	* BTW - why does it show delete as an option here when we clearly can't delete some of these
	* Also- it'd be nice to show a pretty record error in the invoices update, if you try to update the activities on a published invoice
	* Create two invoices - both unpublished, try to delete the oldest one

* Use polymorphic relationship for sub activities
	* Maybe ..

* all delete confirms should go through the modal box - make this a plugin

* The ability to create an activity from the activities & invoices/activities list would be sweet
	* With a little pop-up that asks for the activity type?

* Emailer: 
	* <p>Please note that your current account balance, including this invoice, is: $XXX.XXX . Invoices 1,2, & 3 are outstanding. <red>Invoices 1 & 2 are past their 30 day </red> </p>
	* And change the if line to only send when there's been a change in the invoice status (See the invoice TODO...)
	* This gets a little complicated though - we have to decide if we're going to generate these warnings based on the date of the invoice, or the current situation
	
* The invoice issued_on date I think is rounding off to the end of the day on assignment. It should really be time sensitive.
	
* Better unit tests for Activity::* model. (too , make sure negative values work on whatever..)

Plugins for 
   * Reimbursable scanning
	* phone calls
		* The :phone_extension field, *might* be something we put into the asterisk plugin 

* An employee_rate_changed_last changed plugin would be super-useful at some point...

Nice Features:
	* Todo list.. maybe just a block? Call it an outstanding issues/projects
	* Client Notes? Probably just a google docs link
-------------------
dd if=/dev/urandom bs=200 count=1 | tr -cd 'A-Za-z0-9!@#$%^&*()_+'; echo

CREATE DATABASE `briskbills_development`;
GRANT ALL PRIVILEGES ON briskbills_development.* TO briskbills@localhost IDENTIFIED BY 'cut1ckle';

CREATE DATABASE `cusis_test`;
GRANT ALL PRIVILEGES ON cusis_test.* TO cusis@localhost IDENTIFIED BY 'cut1ckle';
-------------------
required gems:
 * extensions
 * pdf-writer
 * slimtimer4r
 * money

